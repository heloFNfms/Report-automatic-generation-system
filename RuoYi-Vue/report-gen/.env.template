# =============================================================================
# 报告自动化生成系统 - 环境变量配置模板
# =============================================================================
# 请复制此文件为 .env 并填入实际的配置值
# 注意：.env 文件包含敏感信息，请勿提交到版本控制系统

# =============================================================================
# DeepSeek API 配置（必需）
# =============================================================================
# 获取API密钥：https://platform.deepseek.com/api_keys
DEEPSEEK_API_KEY=your_deepseek_api_key_here

# API基础URL（通常不需要修改）
DEEPSEEK_BASE=https://api.deepseek.com

# 使用的模型（推荐使用默认值）
DEEPSEEK_MODEL=deepseek-chat

# =============================================================================
# DeepSeek 高级配置（可选）
# =============================================================================
# 最大重试次数（默认：3）
DEEPSEEK_MAX_RETRIES=3

# 重试基础延迟时间，单位：秒（默认：1.0）
DEEPSEEK_RETRY_DELAY=1.0

# 重试退避倍数（默认：2.0）
# 实际延迟 = RETRY_DELAY * (RETRY_BACKOFF ^ 重试次数)
DEEPSEEK_RETRY_BACKOFF=2.0

# 请求超时时间，单位：秒（默认：60.0）
DEEPSEEK_TIMEOUT=60.0

# 速率限制：每分钟最大请求数（默认：60）
DEEPSEEK_RATE_LIMIT_PER_MINUTE=60

# 速率限制：每小时最大请求数（默认：3600）
DEEPSEEK_RATE_LIMIT_PER_HOUR=3600

# =============================================================================
# MCP 服务配置
# =============================================================================
# MCP服务器地址
MCP_BASE=http://localhost:8000

# =============================================================================
# 向量存储配置
# =============================================================================
# 向量存储后端：faiss（本地）或 pgvector（PostgreSQL）
VECTOR_BACKEND=faiss

# PostgreSQL连接字符串（仅当VECTOR_BACKEND=pgvector时需要）
# PG_DSN=postgresql://user:password@localhost:5432/reportgen

# FAISS索引文件路径（仅当VECTOR_BACKEND=faiss时需要）
FAISS_INDEX_PATH=/app/data/faiss.index
FAISS_META_PATH=/app/data/faiss_meta.json

# =============================================================================
# 数据库配置
# =============================================================================
# MySQL连接字符串
MYSQL_DSN=mysql+asyncmy://user:password@localhost:3306/analyze_db?charset=utf8mb4

# =============================================================================
# 安全配置
# =============================================================================
# API白名单（逗号分隔的IP地址）
API_WHITELIST=127.0.0.1,localhost

# API黑名单（逗号分隔的IP地址）
API_BLACKLIST=

# =============================================================================
# 调试和测试配置
# =============================================================================
# 是否启用API连接测试（true/false）
TEST_API_CONNECTION=false

# 日志级别（DEBUG, INFO, WARNING, ERROR）
LOG_LEVEL=INFO

# =============================================================================
# arXiv搜索配置
# =============================================================================
# arXiv搜索最大结果数
ARXIV_MAX_RESULTS=8

# =============================================================================
# 配置说明
# =============================================================================
# 1. DEEPSEEK_API_KEY 是必需的，请从 https://platform.deepseek.com/ 获取
# 2. 速率限制配置应根据您的API套餐进行调整
# 3. 重试配置可以根据网络环境进行优化
# 4. 向量存储建议生产环境使用 pgvector，开发环境使用 faiss
# 5. 安全配置在生产环境中非常重要，请仔细配置白名单